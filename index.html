<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Ø£Ù†Ù…Ø§Ø· CSS Ù„ØªØ­Ø³ÙŠÙ† Ù…Ø¸Ù‡Ø± Ø§Ù„ØµÙØ­Ø© ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
        body {
            font-family: 'Cairo', sans-serif;
            background: #f0f0f0;
            direction: rtl; /* Ù„Ø¬Ø¹Ù„ Ø§Ù„ØªØ®Ø·ÙŠØ· Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ù„Ù„ÙŠØ³Ø§Ø± */
            padding: 20px;
            margin: 0;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        form {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        form input {
            display: block;
            width: calc(100% - 22px); /* Ø®ØµÙ… Ø§Ù„Ø¨Ø§Ø¯ÙŠÙ†Ø¬ ÙˆØ§Ù„Ø¨ÙˆØ±Ø¯ÙˆØ± */
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1em;
        }
        form button[type="submit"] {
            padding: 12px;
            width: 100%;
            background: #28a745; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± Ø¬Ø°Ø§Ø¨ */
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
            transition: background 0.3s ease;
        }
        form button[type="submit"]:hover {
            background: #218838; /* Ù„ÙˆÙ† Ø£ØºÙ…Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ */
        }
        table {
            width: 100%;
            background: white;
            border-collapse: collapse;
            margin-top: 20px;
            max-width: 1000px; /* Ø¹Ø±Ø¶ Ø£ÙƒØ¨Ø± Ù„Ù„Ø¬Ø¯ÙˆÙ„ Ù„Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± */
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            overflow: hidden; /* Ø¹Ø´Ø§Ù† Ø§Ù„Ù€ border-radius ÙŠØ´ØªØºÙ„ ØµØ­ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        }
        th, td {
            border: 1px solid #eee; /* Ø­Ø¯ÙˆØ¯ ÙØ§ØªØ­Ø© Ù„Ù„Ø¬Ø¯ÙˆÙ„ */
            padding: 12px;
            text-align: center;
            vertical-align: middle; /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¹Ù…ÙˆØ¯ÙŠØ§Ù‹ */
        }
        th {
            background: #f8f8f8; /* Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© Ù„Ø±Ø£Ø³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
            color: #333;
            font-weight: bold;
            font-size: 1.05em;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9; /* Ù„ÙˆÙ† Ù…Ø®ØªÙ„Ù Ù„Ù„ØµÙÙˆÙ Ø§Ù„ÙØ±Ø¯ÙŠØ© ÙˆØ§Ù„Ø²ÙˆØ¬ÙŠØ© */
        }
        .action {
            margin: 3px;
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em; /* Ø­Ø¬Ù… Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
            transition: background 0.3s ease, transform 0.2s ease;
        }
        .action:hover {
            transform: translateY(-2px); /* ØªØ£Ø«ÙŠØ± Ø¨Ø³ÙŠØ· Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ */
        }
        .edit { background: #ffc107; color: #333; } /* Ø£ØµÙØ± */
        .edit:hover { background: #e0a800; }
        .delete { background: #dc3545; color: white; } /* Ø£Ø­Ù…Ø± */
        .delete:hover { background: #c82333; }
        .contract { background: #007bff; color: white; } /* Ø£Ø²Ø±Ù‚ */
        .contract:hover { background: #0056b3; }
        td img {
            max-width: 80px; /* Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
            height: auto;
            display: block;
            margin: 0 auto; /* ØªÙˆØ³ÙŠØ· Ø§Ù„ØµÙˆØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø®Ù„ÙŠØ© */
            border-radius: 4px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }
        td a {
            text-decoration: none; /* Ø¥Ø²Ø§Ù„Ø© Ø®Ø· ØªØ­Øª Ø§Ù„Ø±Ø§Ø¨Ø· */
            color: inherit; /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Ù„ÙˆÙ† Ø§Ù„Ù†Øµ */
        }
        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ (Responsive Design) */
        @media (max-width: 768px) {
            table, form {
                margin: 20px 10px; /* Ù‡ÙˆØ§Ù…Ø´ Ø£Ù‚Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
                padding: 15px;
            }
            th, td {
                padding: 8px;
                font-size: 0.9em;
            }
            td img {
                max-width: 50px; /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ± Ø£ÙƒØ«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ */
            }
            .action {
                padding: 6px 8px;
                font-size: 0.9em;
            }
        }
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            h1 {
                font-size: 1.8em;
            }
            form input, form button {
                font-size: 0.9em;
                padding: 8px;
            }
            table {
                display: block;
                overflow-x: auto; /* Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ…Ø±ÙŠØ± Ø£ÙÙ‚ÙŠØ§Ù‹ */
                white-space: nowrap; /* Ù„Ù…Ù†Ø¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ù† Ø§Ù„Ø§Ù„ØªÙØ§Ù */
            }
            /* Ù…Ù…ÙƒÙ† ØªØ®ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø£Ùˆ ØªØ¹Ù…Ù„ Ù„Ù‡Ø§ ØªØ®Ø·ÙŠØ· Ù…Ø®ØªÙ„Ù Ù‡Ù†Ø§ */
        }
    </style>
</head>
<body>

    <h1>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h1>

    <form id="clientForm">
        <input type="text" id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" required>
        <input type="text" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
        <input type="url" id="estimate" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±" required>
        <input type="url" id="drawings" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª" required>
        <button type="submit">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„</button>
    </form>

    <table id="clientsTable">
        <thead>
            <tr>
                <th>Ø§Ù„ÙƒÙˆØ¯</th>
                <th>Ø§Ù„Ø§Ø³Ù…</th>
                <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                <th>Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±</th>
                <th>Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª</th>
                <th>Ø®ÙŠØ§Ø±Ø§Øª</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>

    <script type="module">
        // Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù…Ù† Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
        import {
            getDatabase, ref, push, onValue, set, remove, get, child
        } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-database.js";
        // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© getAnalytics Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ±ØºØ¨ ÙÙŠ ØªØªØ¨Ø¹ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
        // import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";

        // **Ù‡Ø§Ù… Ø¬Ø¯Ù‹Ø§ Ù„Ù„Ø£Ù…Ø§Ù†:**
        // Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ‡ÙŠØ¦Ø© Firebase Ù‡Ø°Ù‡ Ø¸Ø§Ù‡Ø±Ø© ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©.
        // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù‚ÙˆØ§Ø¹Ø¯ Ø£Ù…Ø§Ù† Firebase (Firebase Security Rules) Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
        // Ù…Ø¶Ø¨ÙˆØ·Ø© Ø¨Ø¯Ù‚Ø© Ø´Ø¯ÙŠØ¯Ø© Ù„Ù…Ù†Ø¹ Ø§Ù„ÙˆØµÙˆÙ„ ØºÙŠØ± Ø§Ù„Ù…ØµØ±Ø­ Ø¨Ù‡ Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ.
        const firebaseConfig = {
            apiKey: "AIzaSyDgOby-sJuIUs8iCErmqtiMbqMuND5ZtCo",
            authDomain: "ala5tsas-alturkey-stats.firebaseapp.com",
            databaseURL: "https://ala5tsas-alturkey-stats-default-rtdb.firebaseio.com",
            projectId: "ala5tsas-alturkey-stats",
            storageBucket: "ala5tsas-alturkey-stats.appspot.com",
            messagingSenderId: "649675735929",
            appId: "1:649675735929:web:f90a49614895c6958ea5a8",
            measurementId: "G-X2FHKZT21J"
        };

        // ØªÙ‡ÙŠØ¦Ø© Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const clientsRef = ref(db, 'clients'); // Ù…Ø±Ø¬Ø¹ Ù„ÙØ±Ø¹ 'clients' ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ± DOM
        const form = document.getElementById("clientForm");
        const tbody = document.querySelector("#clientsTable tbody");

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
        form.addEventListener("submit", async (e) => {
            e.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ù†Ù…ÙˆØ°Ø¬
            const name = document.getElementById("name").value.trim(); // Ø§Ø³ØªØ®Ø¯Ø§Ù… trim Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ø§Ù„Ø²Ø§Ø¦Ø¯Ø©
            const phone = document.getElementById("phone").value.trim();
            const estimate = document.getElementById("estimate").value.trim();
            const drawings = document.getElementById("drawings").value.trim();

            if (!name || !phone || !estimate || !drawings) {
                alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.");
                return;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±Ø¬Ø¹ Ø¬Ø¯ÙŠØ¯ (key ÙØ±ÙŠØ¯) Ù„Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Firebase
            const newClientRef = push(clientsRef);
            try {
                await set(newClientRef, {
                    code: newClientRef.key, // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù€ key Ø§Ù„ÙØ±ÙŠØ¯ ÙƒÙƒÙˆØ¯ Ù„Ù„Ø¹Ù…ÙŠÙ„
                    name,
                    phone,
                    estimate,
                    drawings
                });
                form.reset(); // Ø¥ÙØ±Ø§Øº Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­
                alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„:", error);
                alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„.");
            }
        });

        // Ø¯Ø§Ù„Ø© Ù„Ø­Ø°Ù Ø¹Ù…ÙŠÙ„
        const deleteClient = async (id) => {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ")) {
                try {
                    await remove(ref(db, 'clients/' + id));
                    alert("âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­.");
                } catch (error) {
                    console.error("Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„:", error);
                    alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„.");
                }
            }
        };

        // Ø¯Ø§Ù„Ø© Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù…ÙŠÙ„
        const editClient = async (id) => {
            const snapshot = await get(child(ref(db), `clients/${id}`));
            if (snapshot.exists()) {
                const client = snapshot.val();
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… prompt Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                const newName = prompt("Ø§Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯:", client.name);
                const newPhone = prompt("Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯:", client.phone);
                const newEstimate = prompt("Ø§Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯:", client.estimate);
                const newDrawings = prompt("Ø§Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯:", client.drawings);

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù… ÙŠÙ„ØºÙ Ø£ÙŠ Ù…Ù† Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ£Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù„ÙŠØ³Øª ÙØ§Ø±ØºØ©
                if (newName !== null && newPhone !== null && newEstimate !== null && newDrawings !== null &&
                    newName.trim() !== "" && newPhone.trim() !== "" && newEstimate.trim() !== "" && newDrawings.trim() !== "") {
                    try {
                        await set(ref(db, 'clients/' + id), {
                            code: id, // Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¸Ù„ ÙƒÙ…Ø§ Ù‡Ùˆ (Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯)
                            name: newName.trim(),
                            phone: newPhone.trim(),
                            estimate: newEstimate.trim(),
                            drawings: newDrawings.trim()
                        });
                        alert("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­.");
                    } catch (error) {
                        console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù…ÙŠÙ„:", error);
                        alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù…ÙŠÙ„.");
                    }
                } else {
                    alert("Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø£Ù† Ø£Ø­Ø¯ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙƒØ§Ù† ÙØ§Ø±ØºÙ‹Ø§ Ø£Ùˆ ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡.");
                }
            } else {
                alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ¹Ø¯ÙŠÙ„Ù‡.");
            }
        };

        // Ø¯Ø§Ù„Ø© Ù„ØªØ£ÙƒÙŠØ¯ Ø¹Ù‚Ø¯ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆÙ†Ù‚Ù„Ù‡ Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„Ø¹Ù‚ÙˆØ¯
        const confirmContract = async (id) => {
            const snapshot = await get(child(ref(db), `clients/${id}`));
            if (snapshot.exists()) {
                const client = snapshot.val();
                const contractLink = prompt("Ø§Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø¹Ù‚Ø¯:");
                const accountsLink = prompt("Ø§Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª:");

                if (contractLink && accountsLink && contractLink.trim() !== "" && accountsLink.trim() !== "") {
                    try {
                        await set(ref(db, 'contracts/' + id), { // Ù†Ù‚Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ ÙØ±Ø¹ 'contracts'
                            code: client.code,
                            name: client.name,
                            phone: client.phone,
                            contract: contractLink.trim(),
                            accounts: accountsLink.trim()
                        });
                        // ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø¹Ø¯ Ù†Ù‚Ù„Ù‡ Ù„Ù„Ø¹Ù‚ÙˆØ¯
                        // await remove(ref(db, 'clients/' + id));
                        alert("âœ… ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø¹Ù‚ÙˆØ¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!");
                        window.location.href = "contract.html"; // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„Ø¹Ù‚ÙˆØ¯ (ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯Ù‡Ø§)
                    } catch (error) {
                        console.error("Ø®Ø·Ø£ ÙÙŠ Ù†Ù‚Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø¹Ù‚ÙˆØ¯:", error);
                        alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù†Ù‚Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø¹Ù‚ÙˆØ¯.");
                    }
                } else {
                    alert("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¹Ù‚Ø¯ ÙˆØ±Ø§Ø¨Ø· Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.");
                }
            } else {
                alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø±Ø§Ø¯ ØªØ£ÙƒÙŠØ¯ Ø¹Ù‚Ø¯Ù‡.");
            }
        };

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØºÙŠØ±Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
        onValue(clientsRef, (snapshot) => {
            const data = snapshot.val(); // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase
            tbody.innerHTML = ""; // ØªÙØ±ÙŠØº Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¦Ù‡

            if (data) {
                // ØªÙƒØ±Ø§Ø± Ø¹Ù„Ù‰ ÙƒÙ„ Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶Ù‡ ÙƒØµÙ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
                Object.entries(data).forEach(([id, client]) => {
                    const tr = document.createElement("tr"); // Ø¥Ù†Ø´Ø§Ø¡ ØµÙ Ø¬Ø¯ÙŠØ¯
                    tr.innerHTML = `
                        <td>${client.code}</td>
                        <td>${client.name}</td>
                        <td>${client.phone}</td>
                        <td><a href="${client.estimate}" target="_blank"><img src="${client.estimate}" alt="Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±"></a></td>
                        <td><a href="${client.drawings}" target="_blank"><img src="${client.drawings}" alt="Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª"></a></td>
                        <td>
                            <button class="action edit" data-id="${id}">âœï¸</button>
                            <button class="action delete" data-id="${id}">ğŸ—‘ï¸</button>
                            <button class="action contract" data-id="${id}">ğŸ“„</button>
                        </td>
                    `;
                    tbody.appendChild(tr); // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙ Ø¥Ù„Ù‰ Ø¬Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„

                    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ø¥Ù„Ù‰ DOM
                    tr.querySelector(".edit").addEventListener("click", () => editClient(id));
                    tr.querySelector(".delete").addEventListener("click", () => deleteClient(id));
                    tr.querySelector(".contract").addEventListener("click", () => confirmContract(id));
                });
            } else {
                // Ø±Ø³Ø§Ù„Ø© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø¹Ù…Ù„Ø§Ø¡
                const tr = document.createElement("tr");
                tr.innerHTML = `<td colspan="6">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡ Ù„Ø¹Ø±Ø¶Ù‡Ù… Ø­Ø§Ù„ÙŠÙ‹Ø§.</td>`;
                tbody.appendChild(tr);
            }
        });
    </script>

</body>
</html>
